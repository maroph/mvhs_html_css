<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beispiel: Escape für HTML</title>
    <meta name="author" content="Manfred Rosenboom">
    <meta name="description" content="Escape Code/Text für HTML">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="robots" content="all">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/HTML5_Logo_32.png">
    <link rel="stylesheet" href="../assets/css/modern-normalize.css">
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>

<header>
    <h1>Beispiel: Escape Code/Text für HTML</h1>
</header>

<main>
    <section>
        <form>
            <label for="input">Code/Text</label><br>
            <textarea id="input" name="input" rows="10" cols="70" wrap="soft" placeholder="Tastatur oder Zwischenablage"></textarea><br/>
            <input type="button" id="escape" value="Escape"/>&nbsp;&nbsp;<input type="button" id="clear" value="Alles löschen"/><br>
            <p>&nbsp;</p>
            <label for="output">Escaped Code/Text</label><br>
            <textarea id="output" name="output" rows="10" cols="70" wrap="soft" disabled="disabled"></textarea><br/>
            <input type="button" id="cpClipboard" value="Clipboard" title="kopiere die Daten ins Clipboard"/><br>
        </form>
    </section>
</main>

<script>
    let taInput = document.getElementById('input');
    let btnEscape = document.getElementById('escape');
    let btnClear = document.getElementById('clear');
    let taOutput = document.getElementById('output');
    let btnCpClipboard = document.getElementById('cpClipboard');

    btnEscape.addEventListener('mousedown', escapeText);
    btnClear.addEventListener('mousedown', clearText);
    btnCpClipboard.addEventListener('mousedown', copy2Clipboard);

    function escapeText(event) {
        let code = taInput.value;
        if (code === '') {
            taOutput.value = '';
            return;
        }

        let escaped = '<pre><code>\n';
        for (let i = 0; i < code.length; i++) {
            let codechar = code.substring(i, i + 1)
            switch (codechar) {
                case '"': escaped += "&quot;"; break;
                case '<': escaped += "&lt;"; break;
                case '>': escaped += "&gt;"; break;
                case '&': escaped += "&amp;"; break;
                default : escaped += codechar; break;
            }
        }
        escaped += '\n</code></pre>';
        taOutput.value = escaped;
    }

    function clearText(event) {
        taInput.value = '';
        taOutput.value = '';
    }

    function copy2Clipboard(event) {
        // https://www.w3schools.com/howto/howto_js_copy_clipboard.asp
        taOutput.select();
        taOutput.setSelectionRange(0, 99999); // For mobile devices
        navigator.clipboard.writeText(taOutput.value);
    }
</script>
<script src="../assets/js/footer.js"></script>
</body>
</html>
